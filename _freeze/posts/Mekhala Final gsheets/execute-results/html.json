{
  "hash": "a0949acceb9896c20cd48dda65ab26d1",
  "result": {
    "markdown": "---\ntitle: \"Migration in Bangalore\"\nauthor: \"Mekhala Kumar\"\ndescription: \"Final Project\"\ndate: \"08/27/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - final\n  - migration\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(googlesheets4)\nlibrary(ggplot2)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n### Briefly describe the data\nThe data being used is Indian Census Data for the year 2011 and district of Bangalore. There are several tables in the Census such as population, languages spoken, education and migration.\\\nFor this project, I am using the population data and one of the migration tables (D3). The Indian Census has two definitions of migrations: 1)a person who lives in area other than their place of birth and 2)a person who changed their place of residence. The D3 Census table uses the second definition, it also includes information about the number of years they have resided in the area and reason why they migrated. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Removing unnecessary rows and renaming columns\nmig3 <- read_sheet(\"https://docs.google.com/spreadsheets/d/1xhCCpYU8WDL4c47CURnFJiXadSvmC7Y0/edit?usp=sharing&ouid=100725679947399468486&rtpof=true&sd=true\",skip=5,col_names = c(\"tab_name\",\"state_code\",\"dist_code\",\"area\",\"res\",\"res_time\",\"last_res\",\"last_res_type\",\"tot_p\",\"tot_m\",\"tot_f\",\"work_p\",\"work_m\",\"work_f\",\"busi_t\",\"busi_m\",\"busi_f\",\"educ_t\",\"educ_m\",\"educ_f\",\"mar_t\",\"mar_m\",\"mar_f\",\"after_birth_t\",\"after_birth_m\",\"after_birth_f\",\"with_hh_t\",\"with_hh_m\",\"with_hh_f\",\"others_p\",\"others_m\",\"others_f\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `gargle_abort_request_failed()`:\n! Client error: (400) FAILED_PRECONDITION\n• Request can not be executed in the current system state, such as deleting a\n  non-empty directory.\n• This operation is not supported for this document\n```\n:::\n\n```{.r .cell-code}\ndim(mig3)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nprint(summarytools::dfSummary(mig3,\n                        varnumbers = FALSE,\n                        plain.ascii  = FALSE, \n                        style        = \"grid\", \n                        graph.magnif = 0.70, \n                        valid.col    = FALSE),\n      method = 'render',\n      table.classes = 'table-condensed')\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in summarytools::dfSummary(mig3, varnumbers = FALSE, plain.ascii = FALSE, : object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\ntail(mig3)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in tail(mig3): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\npop <- read_excel(\"D:/Data Science Fundamentals/Final/A-1_NO_OF_VILLAGES_TOWNS_HOUSEHOLDS_POPULATION_AND_AREA (1).xlsx\",skip=4,col_names=c(\"state_code\",\"dist_code\",\"sub_dist_code\",\"type_of_region\",\"name\",\"reg_type\",\"num_village_inhabit\",\"num_village_uninhabit\",\"num_town\",\"num_hh\",\"pop_t\",\"pop_m\",\"pop_f\",\"area_region\",\"pop_density\"))%>%filter(name==\"Bangalore\")\n\n\n#things to be removed- all durations of residence, total in the total, rural, urban column? not sure\n#stuff that are aggregates- place of enum-res, \n#keep the specifics or remove them?\n#how to print more values in summarytools\n```\n:::\n\n\n\n\n\n\n## Tidy Data\n\nIn the last_res( last place of residence variable), place of enumeration refers to the district where the person's details were recorded. The state of enumeration is the state that the information was recorded. Since it can be confusing to understand, the values are being renamed as intrastate, intradistict, interdistrict and interstate to give an indication of the type of migration that was undertaken. \nRecode was used because only certain observations needed to be changed and using case_When() instead would result in the unchanged values being saved as NA.\n\nMoreover, the reasons for migration in the dataset were present as various columns which needed to be pivoted in order to be in the tidy data format.21 columns of reasons for migration were pivoted and before doing the same, the new total number of rows and columns were calculated. \n\n::: {.cell}\n\n```{.r .cell-code}\n#recoding values\nmig3<-mutate(mig3,last_residence=recode(last_res,`Within the state of enumeration but outside the place of enumeration`= \"Intrastate\",\n         \t`Elsewhere in the district of enumeration`= \"Intradistrict\",\n        `In other districts of the state of enumeration` = \"Interdistrict\",\n        `States in India beyond the state of enumeration`= \"Interstate\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(mig3, last_residence = recode(last_res, `Within the state of enumeration but outside the place of enumeration` = \"Intrastate\", : object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nmig3<-mig3%>%select(tab_name,state_code,dist_code,area,res,res_time,last_res,last_residence,everything())\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., tab_name, state_code, dist_code, area, res, res_time, : object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nmig3=subset(mig3,select=-c(7))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in subset(mig3, select = -c(7)): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\ndim(mig3)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\n#pivoting data\n\n#sanity check\n#original rows=1875\n#original columns=32\n#number of columns to pivot=21\n\n#expected rows\nrows=1875*21\nprint(\"Expected number of rows:\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Expected number of rows:\"\n```\n:::\n\n```{.r .cell-code}\nrows\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 39375\n```\n:::\n\n```{.r .cell-code}\n# expected columns \ncol=(32-21)+2\nprint(\"Expected number of columns:\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Expected number of columns:\"\n```\n:::\n\n```{.r .cell-code}\ncol\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 13\n```\n:::\n\n```{.r .cell-code}\nmig3<-pivot_longer(mig3, 12:32, names_to = \"Reason for Migration\", values_to = \"Number of People\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_longer(mig3, 12:32, names_to = \"Reason for Migration\", : object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\ndim(mig3)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'mig3' not found\n```\n:::\n:::\n\n\nAre there any variables that require mutation to be usable in your analysis stream? For example, do you need to calculate new values in order to graph them? Can string values be represented numerically? Do you need to turn any variables into factors and reorder for ease of graphics and visualization?\n\nDocument your work here.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(mig3$res_time)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(mig3$res_time): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\ntable(mig3$last_residence)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(mig3$last_residence): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\ntable(mig3$last_res_type)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(mig3$last_res_type): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\n#why did it change after this\nresidence_time_temp <- unique(mig3$res_time)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(mig3$res_time): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nresidence_time_temp\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'residence_time_temp' not found\n```\n:::\n\n```{.r .cell-code}\nmig3<-mig3%>%\n  mutate(res_time2 = factor(res_time, \n                       levels=residence_time_temp[c(1,2,3,4,5)]))%>%\n  select(-res_time)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., res_time2 = factor(res_time, levels = residence_time_temp[c(1, : object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nrm(residence_time_temp)\n\ntable(mig3$res_time2)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in table(mig3$res_time2): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nlast_residence_temp <- unique(mig3$last_residence)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(mig3$last_residence): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nlast_residence_temp\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'last_residence_temp' not found\n```\n:::\n\n```{.r .cell-code}\nlast_res_type_temp <- unique(mig3$last_res_type)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in unique(mig3$last_res_type): object 'mig3' not found\n```\n:::\n\n```{.r .cell-code}\nlast_res_type_temp\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in eval(expr, envir, enclos): object 'last_res_type_temp' not found\n```\n:::\n:::\n\n\n## Join Data\n\nBe sure to include a sanity check, and double-check that case count is correct!\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}