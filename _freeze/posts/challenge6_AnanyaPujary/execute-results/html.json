{
  "hash": "3e3cca4cf2049e647b436c559e7bf711",
  "result": {
    "markdown": "---\ntitle: \"Challenge 6\"\nauthor: \"Ananya Pujary\"\ndescription: \"Visualizing Time and Relationships\"\ndate: \"08/23/2022\"\nformat:\n  html:\n    toc: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_6\n  - debt\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(readxl)\nlibrary(skimr)\nlibrary(lubridate)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\nReading in the 'debt_in_trillions.xslx' dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt <- read_excel(\"_data/debt_in_trillions.xlsx\")\n```\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(debt)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |     |\n|:------------------------|:----|\n|Name                     |debt |\n|Number of rows           |74   |\n|Number of columns        |8    |\n|_______________________  |     |\n|Column type frequency:   |     |\n|character                |1    |\n|numeric                  |7    |\n|________________________ |     |\n|Group variables          |None |\n\n\n**Variable type: character**\n\n|skim_variable    | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:----------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|Year and Quarter |         0|             1|   5|   5|     0|       74|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|   sd|   p0|   p25|   p50|   p75|  p100|hist  |\n|:-------------|---------:|-------------:|-----:|----:|----:|-----:|-----:|-----:|-----:|:-----|\n|Mortgage      |         0|             1|  8.27| 1.18| 4.94|  8.04|  8.41|  9.05| 10.44|▂▂▅▇▂ |\n|HE Revolving  |         0|             1|  0.52| 0.12| 0.24|  0.43|  0.52|  0.62|  0.71|▃▅▇▇▇ |\n|Auto Loan     |         0|             1|  0.93| 0.23| 0.62|  0.74|  0.81|  1.15|  1.42|▇▇▂▃▃ |\n|Credit Card   |         0|             1|  0.76| 0.07| 0.66|  0.70|  0.74|  0.82|  0.93|▇▅▅▃▁ |\n|Student Loan  |         0|             1|  0.92| 0.43| 0.24|  0.53|  0.91|  1.30|  1.58|▇▆▆▆▇ |\n|Other         |         0|             1|  0.38| 0.05| 0.30|  0.34|  0.39|  0.42|  0.49|▆▅▇▇▂ |\n|Total         |         0|             1| 11.78| 1.74| 7.23| 11.31| 11.85| 12.67| 14.96|▂▂▇▇▃ |\n:::\n:::\n\nThis dataset gives us information on different loan amounts such as student loans, mortgage, and credit card through different years (2003-2021) and quarters. There are 74 rows and 8 columns, of which 1 is character type and 7 are numeric. There aren't any missing values in the columns.\n\n## Tidy Data (as needed)\n\nThe 'Year and Quarter' column can be parsed into a date type column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_final <-debt %>%\n  mutate(date = parse_date_time(`Year and Quarter`, \n                           orders=\"yq\"))\n```\n:::\n\n\n## Time Dependent Visualization\n\nFirst, I want to look at how total debt varies with time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data=debt_final) +\n  geom_line(aes(x=date, y=Total)) + labs(title = \"Total debt increases with time\", x = \"Time\", y = \"Total Debt\") \n```\n\n::: {.cell-output-display}\n![](challenge6_AnanyaPujary_files/figure-html/time dependent visualization 1-1.png){width=672}\n:::\n:::\n\n\nThe graph shows a linear increase between 2003 to around 2007, with debt decreasing from 2007 to about 2014, and again increasing through 2021.\n\nNow, looking specifically at how each loan type varies with time:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_long <- debt_final %>%\n  pivot_longer(cols = Mortgage:Other, names_to = \"loan_type\", values_to = \"totals\") %>%\n  select(-Total) %>% mutate(loan_type = as.factor(loan_type))\n\nggplot(debt_long, aes(x = date,y = totals,color = loan_type)) + geom_point() + facet_grid(rows = vars(loan_type)) + labs(title = \"Debt Types over the Years\", x = \"Date\", y = \"Amount\") + theme(strip.text = element_text(size = 5))\n```\n\n::: {.cell-output-display}\n![](challenge6_AnanyaPujary_files/figure-html/time dependent visualization 2-1.png){width=672}\n:::\n:::\n\nMortgage in general is higher than any other loan type.\n\n\n## Visualizing Part-Whole Relationships\n\nI want to visualize the proportion of each loan type as a whole using a pie chart.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndebt_long <- debt_long %>% \n  mutate(loan_type = fct_relevel(loan_type, \"Mortgage\", \"HE Revolving\",\n                            \"Auto Loan\", \"Student Loan\",  \n                            \"Credit Card\",\"Other\")) %>%\n  mutate(perc = totals/ sum(totals))\n\nggplot(debt_long, aes(x=\"\", y=totals, fill=loan_type)) +\n  geom_bar(stat=\"identity\", width=1) +\n  coord_polar(\"y\", start=0) + labs(title = \"Proportion of Loan Types\", x = \"Date\", y = \"Amount\") + theme_void() + scale_fill_brewer(palette=\"Blues\") \n```\n\n::: {.cell-output-display}\n![](challenge6_AnanyaPujary_files/figure-html/part-whole visualization-1.png){width=672}\n:::\n:::\n\nMortgage takes up the most space proportionally. I also wanted to add in percentage labels to this chart but couldn't get the code right, will keep working on it.\n",
    "supporting": [
      "challenge6_AnanyaPujary_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}