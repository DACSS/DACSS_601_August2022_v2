{
  "hash": "753b61e188237dc7eaef1983d236ef4f",
  "result": {
    "markdown": "---\ntitle: \"Challenge 4\"\nauthor: \"Mani Shanker Kamarapu\"\ndesription: \"More data wrangling: pivoting\"\ndate: \"08/18/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_4\n  - debt_in_trillions\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Read in data\n\nThe data set is about the debt in trillions in different years and quarters and various types of loans. It gives the detailed description and data from 2003-2021 in four quarters. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nDebt <- read_excel(\"_data/debt_in_trillions.xlsx\") %>%\n  select(!Total)\nDebt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 74 × 7\n   `Year and Quarter` Mortgage `HE Revolving` `Auto Loan` Credit…¹ Stude…² Other\n   <chr>                 <dbl>          <dbl>       <dbl>    <dbl>   <dbl> <dbl>\n 1 03:Q1                  4.94          0.242       0.641    0.688   0.241 0.478\n 2 03:Q2                  5.08          0.26        0.622    0.693   0.243 0.486\n 3 03:Q3                  5.18          0.269       0.684    0.693   0.249 0.477\n 4 03:Q4                  5.66          0.302       0.704    0.698   0.253 0.449\n 5 04:Q1                  5.84          0.328       0.72     0.695   0.260 0.446\n 6 04:Q2                  5.97          0.367       0.743    0.697   0.263 0.423\n 7 04:Q3                  6.21          0.426       0.751    0.706   0.33  0.41 \n 8 04:Q4                  6.36          0.468       0.728    0.717   0.346 0.423\n 9 05:Q1                  6.51          0.502       0.725    0.71    0.364 0.394\n10 05:Q2                  6.70          0.528       0.774    0.717   0.374 0.402\n# … with 64 more rows, and abbreviated variable names ¹​`Credit Card`,\n#   ²​`Student Loan`\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n:::\n\n\n### Briefly describe the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(Debt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 74  7\n```\n:::\n:::\n\n\nThis will give us the dimensions of the data set and which is 74 rows and 7 columns. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(Debt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Year and Quarter      Mortgage       HE Revolving      Auto Loan     \n Length:74          Min.   : 4.942   Min.   :0.2420   Min.   :0.6220  \n Class :character   1st Qu.: 8.036   1st Qu.:0.4275   1st Qu.:0.7430  \n Mode  :character   Median : 8.412   Median :0.5165   Median :0.8145  \n                    Mean   : 8.274   Mean   :0.5161   Mean   :0.9309  \n                    3rd Qu.: 9.047   3rd Qu.:0.6172   3rd Qu.:1.1515  \n                    Max.   :10.442   Max.   :0.7140   Max.   :1.4150  \n  Credit Card      Student Loan        Other       \n Min.   :0.6590   Min.   :0.2407   Min.   :0.2960  \n 1st Qu.:0.6966   1st Qu.:0.5333   1st Qu.:0.3414  \n Median :0.7375   Median :0.9088   Median :0.3921  \n Mean   :0.7565   Mean   :0.9189   Mean   :0.3831  \n 3rd Qu.:0.8165   3rd Qu.:1.3022   3rd Qu.:0.4154  \n Max.   :0.9270   Max.   :1.5840   Max.   :0.4860  \n```\n:::\n:::\n\n\nThe above observation helps us with the mean values of the debts and we can get an overall grasp of the situation through years. And further we can also draw a plot representing the mean values and type of debt.\n\n## Tidy Data (as needed)\n\nAs you can observe that the data set is still untidy so we use two important functions to make it tidy, those are `pivot longer` and `pivot wider`. And also first I will use `separate` function to split year an quarter into two separate columns. Now we use pivot_longer() to convert types of debt variables into single column so we can have each observation for each row. And at last convert quarter rows into columns so we can have each variable for each column.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDebt <- Debt %>%\n  separate(\"Year and Quarter\", into = c(\"Year\", \"Quarter\"), \":\") %>%\n  pivot_longer(Mortgage:Other, names_to = \"Type of loan\", values_to = \"Amount\") %>%\n  pivot_wider(names_from = \"Quarter\", values_from = \"Amount\")\nDebt\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 114 × 6\n   Year  `Type of loan`    Q1    Q2    Q3    Q4\n   <chr> <chr>          <dbl> <dbl> <dbl> <dbl>\n 1 03    Mortgage       4.94  5.08  5.18  5.66 \n 2 03    HE Revolving   0.242 0.26  0.269 0.302\n 3 03    Auto Loan      0.641 0.622 0.684 0.704\n 4 03    Credit Card    0.688 0.693 0.693 0.698\n 5 03    Student Loan   0.241 0.243 0.249 0.253\n 6 03    Other          0.478 0.486 0.477 0.449\n 7 04    Mortgage       5.84  5.97  6.21  6.36 \n 8 04    HE Revolving   0.328 0.367 0.426 0.468\n 9 04    Auto Loan      0.72  0.743 0.751 0.728\n10 04    Credit Card    0.695 0.697 0.706 0.717\n# … with 104 more rows\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndim(Debt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 114   6\n```\n:::\n\n```{.r .cell-code}\nsummary(Debt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Year           Type of loan             Q1                Q2         \n Length:114         Length:114         Min.   : 0.2407   Min.   : 0.2429  \n Class :character   Class :character   1st Qu.: 0.4614   1st Qu.: 0.4585  \n Mode  :character   Mode  :character   Median : 0.7170   Median : 0.7340  \n                                       Mean   : 1.9518   Mean   : 1.9661  \n                                       3rd Qu.: 1.2190   3rd Qu.: 1.2260  \n                                       Max.   :10.1600   Max.   :10.4420  \n                                                                          \n       Q3               Q4         \n Min.   :0.2488   Min.   : 0.2529  \n 1st Qu.:0.4660   1st Qu.: 0.4718  \n Median :0.7316   Median : 0.7313  \n Mean   :1.9571   Mean   : 1.9783  \n 3rd Qu.:1.2055   3rd Qu.: 1.2237  \n Max.   :9.8610   Max.   :10.0430  \n NA's   :6        NA's   :6        \n```\n:::\n:::\n\n\nThe final dimensions of the tidy data set are 114 rows and 6 columns.\n",
    "supporting": [
      "challenge4_ManiShankerKamarapu_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}