{
  "hash": "4a41d437b9a7f61e843c67c909da7bff",
  "result": {
    "markdown": "---\ntitle: \"Challenge 2 \"\nauthor: \"Mekhala Kumar\"\ndescription: \"Data wrangling: using group() and summarise()\"\ndate: \"08/16/2022\"\nformat:\n  html:\n    print: paged \n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - challenge_2\n  - State County dataset\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nknitr::opts_chunk$set(echo = TRUE, warning=FALSE, message=FALSE)\n```\n:::\n\n\n## Reading in Data\n\nThe dataset used is State County (the excel file). While reading in the data, it was also cleaned by removing the first few rows and last few rows which had unnecessary text. Since the country Canada was also present in the last row of the dataset but is a different country, it has been removed as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(readxl)\nlibrary(stringr)\nrailroad_df <- read_excel(\"_data/StateCounty2012.xls\",skip=3,col_names= c(\"state\", \"delete\", \"county\", \"delete\", \"total_employees\"))%>%\nselect(!contains(\"delete\"))%>%\n  filter(!str_detect(state, \"Total\"))\ntail(railroad_df, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n   state                                               county     total_employ…¹\n   <chr>                                               <chr>      <chr>         \n 1 WY                                                  PLATTE     129           \n 2 WY                                                  SHERIDAN   252           \n 3 WY                                                  SUBLETTE   3             \n 4 WY                                                  SWEETWATER 196           \n 5 WY                                                  UINTA      49            \n 6 WY                                                  WASHAKIE   10            \n 7 WY                                                  WESTON     37            \n 8 CANADA                                              <NA>       662           \n 9 1  Military designation.                            <NA>       <NA>          \n10 NOTE:  Excludes 2,896 employees without an address. <NA>       <NA>          \n# … with abbreviated variable name ¹​total_employees\n```\n:::\n\n```{.r .cell-code}\nrailroad_df<-head(railroad_df, -2)\ntail(railroad_df, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n   state  county     total_employees\n   <chr>  <chr>      <chr>          \n 1 WY     NIOBRARA   51             \n 2 WY     PARK       29             \n 3 WY     PLATTE     129            \n 4 WY     SHERIDAN   252            \n 5 WY     SUBLETTE   3              \n 6 WY     SWEETWATER 196            \n 7 WY     UINTA      49             \n 8 WY     WASHAKIE   10             \n 9 WY     WESTON     37             \n10 CANADA <NA>       662            \n```\n:::\n\n```{.r .cell-code}\nrailroad_df<-head(railroad_df, -1)\ntail(railroad_df, 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n   state county     total_employees\n   <chr> <chr>      <chr>          \n 1 WY    NATRONA    92             \n 2 WY    NIOBRARA   51             \n 3 WY    PARK       29             \n 4 WY    PLATTE     129            \n 5 WY    SHERIDAN   252            \n 6 WY    SUBLETTE   3              \n 7 WY    SWEETWATER 196            \n 8 WY    UINTA      49             \n 9 WY    WASHAKIE   10             \n10 WY    WESTON     37             \n```\n:::\n\n```{.r .cell-code}\nrailroad_df = railroad_df[-1,] \nrailroad_df <- transform(railroad_df,employees = as.numeric(total_employees))\n View(railroad_df)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in .External2(C_dataviewer, x, title): unable to start data viewer\n```\n:::\n:::\n\n\n## Data description\n\nThe data consists of 3 columns- state, county and employees. Since the employees column contained character datatype, total_employees was created with the double type of variable. There are 53 states included in the data and 1709 counties. The number of employees by state can also be seen in the third table.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(railroad_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  state               county total_employees employees\n1    AE                  APO               2         2\n2    AK            ANCHORAGE               7         7\n3    AK FAIRBANKS NORTH STAR               2         2\n4    AK               JUNEAU               3         3\n5    AK    MATANUSKA-SUSITNA               2         2\n6    AK                SITKA               1         1\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>%\n  select(state)%>%\n  n_distinct(.)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 53\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>%\n  select(county)%>%\n  n_distinct(.)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1709\n```\n:::\n\n```{.r .cell-code}\nrailroad_df %>%\n  group_by(state) %>%\n  summarise(employees2 = sum(employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 53 × 2\n   state employees2\n   <chr>      <dbl>\n 1 AE             2\n 2 AK           103\n 3 AL          4257\n 4 AP             1\n 5 AR          3871\n 6 AZ          3153\n 7 CA         13137\n 8 CO          3650\n 9 CT          2592\n10 DC           279\n# … with 43 more rows\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n:::\n\n\n## Grouped Summary Statistics and Interpretation\n\nFirst, the summary statistics were checked for a country wide comparison. Then a few states were selected in such a way that a few states had many employees (around 13000) and a few states selected had a small number of employees (100-200). This was done in order to check how the central tendency and dispersion varied across counties in a particular state.\\\nBoth California and Nebraska, which had a larger number of employees, had a higher mean for the total employees among the counties compared to the mean number of employees across states. This is possibly due to the fact that they had more employees. Similarly, it was observed that in the case where there were a lower number of employees, the mean for the total employees across counties were lower and the standard deviation across counties was lower (in Vermont and Alaska). As can be seen below, the District of Columbia cannot be analysed in this way as it consists of a single county.\\\nFinally, the total number of employees in each county of a state were arranged in descending order because a county with a higher number of employees indicates that there are more job opportunities or perhaps a higher population in the area.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(summarytools)\n\nrailroad_df%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1       87.17816               21             1          8207     283.6359\n  var.employees IQR.employees\n1      80449.32            58\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"CA\")%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1       238.8545               61             1          2888     549.4692\n  var.employees IQR.employees\n1      301916.3           188\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"CA\")%>%group_by(county)%>%arrange(county, desc(employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 55 × 4\n# Groups:   county [55]\n   state county       total_employees employees\n   <chr> <chr>        <chr>               <dbl>\n 1 CA    ALAMEDA      346                   346\n 2 CA    AMADOR       9                       9\n 3 CA    BUTTE        69                     69\n 4 CA    CALAVERAS    30                     30\n 5 CA    COLUSA       2                       2\n 6 CA    CONTRA COSTA 348                   348\n 7 CA    EL DORADO    103                   103\n 8 CA    FRESNO       341                   341\n 9 CA    GLENN        4                       4\n10 CA    HUMBOLDT     2                       2\n# … with 45 more rows\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"NE\")%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1       148.0449               15             1          3797     511.5816\n  var.employees IQR.employees\n1      261715.7            66\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"NE\")%>%group_by(county)%>%arrange(county, desc(employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 89 × 4\n# Groups:   county [89]\n   state county    total_employees employees\n   <chr> <chr>     <chr>               <dbl>\n 1 NE    ADAMS     77                     77\n 2 NE    ANTELOPE  2                       2\n 3 NE    ARTHUR    2                       2\n 4 NE    BANNER    8                       8\n 5 NE    BLAINE    2                       2\n 6 NE    BOONE     2                       2\n 7 NE    BOX BUTTE 1168                 1168\n 8 NE    BROWN     1                       1\n 9 NE    BUFFALO   107                   107\n10 NE    BURT      9                       9\n# … with 79 more rows\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"DC\")%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1            279              279           279           279           NA\n  var.employees IQR.employees\n1            NA             0\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"VT\")%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1           18.5              8.5             3            83     24.54431\n  var.employees IQR.employees\n1      602.4231             8\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"VT\")%>%group_by(county)%>%arrange(county, desc(employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14 × 4\n# Groups:   county [14]\n   state county     total_employees employees\n   <chr> <chr>      <chr>               <dbl>\n 1 VT    ADDISON    8                       8\n 2 VT    BENNINGTON 8                       8\n 3 VT    CALEDONIA  3                       3\n 4 VT    CHITTENDEN 40                     40\n 5 VT    ESSEX      4                       4\n 6 VT    FRANKLIN   83                     83\n 7 VT    GRAND ISLE 5                       5\n 8 VT    LAMOILLE   4                       4\n 9 VT    ORANGE     9                       9\n10 VT    ORLEANS    13                     13\n11 VT    RUTLAND    59                     59\n12 VT    WASHINGTON 3                       3\n13 VT    WINDHAM    10                     10\n14 VT    WINDSOR    10                     10\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"AK\")%>% summarise (mean.employees = mean(`employees`), median.employees = median(`employees`), min.employees = min(`employees`), max.employees = max(`employees`), sd.employees = sd(`employees`), var.employees = var(`employees`), IQR.employees = IQR(`employees`))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  mean.employees median.employees min.employees max.employees sd.employees\n1       17.16667              2.5             1            88     34.76445\n  var.employees IQR.employees\n1      1208.567             4\n```\n:::\n\n```{.r .cell-code}\nrailroad_df%>% filter(state == \"AK\")%>%group_by(county)%>%arrange(county, desc(employees))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n# Groups:   county [6]\n  state county               total_employees employees\n  <chr> <chr>                <chr>               <dbl>\n1 AK    ANCHORAGE            7                       7\n2 AK    FAIRBANKS NORTH STAR 2                       2\n3 AK    JUNEAU               3                       3\n4 AK    MATANUSKA-SUSITNA    2                       2\n5 AK    SITKA                1                       1\n6 AK    SKAGWAY MUNICIPALITY 88                     88\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}