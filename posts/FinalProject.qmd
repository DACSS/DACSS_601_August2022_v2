---
title: "Final Project - Indian Stock Market Analysis "
author: "Adithya Parupudi"
desription: "Analysing NIFTY50 Stocks between 2000-2021"
date: "08/02/2022"
format:
  html:
    toc: true
    code-fold: true
    code-copy: true
    code-tools: true
categories:
  - tidyverse
  - final_project
  - Adithya
  - dataset
  - ggplot2
---

## Load Libraries

```{r}
#| label: setup
#| warning: false

library(tidyverse)
library(ggplot2)
library(lubridate)
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

Stock is also refered to as securities

#### Column Descriptions

Description of columns in the file:

-   Date --- Date of trade

-   symbol --- Name of the company

-   Series --- We have only one series - EQ, which stands for Equity.

-   Prev Close --- Refers to the final price of a stock of the previous dat when the market officially closes, which is at 3:30pm IST

-   Open --- The open is the starting period of trading on a securities exchange or organized over-the-counter market.

-   High --- Highest price at which a stock traded during the course of the trading day.

-   Low --- Lowest price at which a stock traded during the course of the trading day.

-   Last --- The last price of a stock is just one price to consider when buying or selling shares. The last price is simply the most recent one

-   Close --- The close is a reference to the end of a trading session in the financial markets when the markets close for the day.

-   VWAP (Volume-weighted average price)- It is the ratio of the value traded to total volume traded over a particular time horizon. It is a measure of the average price at which a stock is traded over the trading horizon

-   Volume --- It is the amount of a security that was traded during a given period of time

-   Turnover -It is a measure of sellers versus buyers of a particular stock. It is calculated by dividing the daily volume of a stock by the \"float\" of a stock, which is the number of shares available for sale by the general trading public.

-   Trades- The number of shares being traded on a given day is called trading volumes

-   Deliverable Volume --- quantity of shares which actually move from one set of people (who had those shares in their demat account before today and are selling today) to another set of people (who have purchased those shares

-   %Deliverable --- shares which are actually transferred from one person\'s to another\'s demat account.

## Read Data

There are multiple .csv files, one for each stock, which are placed in a folder. I am reading data from all the csv files and combining them into a single data-frame using purrr package.

```{r}
# Read all the CSV files at once
all_stocks <- dir("_data/NIFTY_AdithyaParupudi/", full.names = TRUE) %>%  map_dfr(read_csv)
all_stocks

```

```{r}
dim(all_stocks)

colnames(all_stocks)
```

Looks like the last column has a spelling mistake. I am correcting it to prevent further confusion. \`%Deliverble\` changed to Percent_Deliverable

## Data Cleaning

```{r}
all_stocks <- all_stocks %>% rename(Percent_Deliverable = `%Deliverble`)
```

```{r}
# separating year from the Date column

# all_stocks %>% select(Date) %>% year()

x<-format(as.Date(all_stocks$Date, format="%Y/%m/%d"))

all_stocks_yy <- all_stocks %>% 
  mutate(yy=year(x)) %>%
  select(-Date)
print(all_stocks_yy)

all_stocks_yy %>% select(1) %>% distinct()

```

Reading-in the data of wipro stock from the dataset.

```{r}

list.files(path = "/_data/NIFTY_3/", pattern = "*.csv") 
# %>% map_df(~read_csv(.))
```

Column description which is not obvious:

1.  VWAP : volume-weighted average price - It's a trading benchmark that represents the average price a security has traded at throughout the day, based on both volume and price
2.  Series column has EQ values - refers to equity
3.  Turnover : Stock turnover rate is considered to be **a measure of sales performance**; usually the higher the stock turnover rate, the better your stock/business is performing. The lower the rate, the longer the stock is taking to turn over.

```{r}
colnames(wipro)
```

```{r}

wipro <- read_csv("_data/NIFTY_AdithyaParupudi/WIPRO.csv")
wipro
```

There are no comments in this dataset, so saves time for cleaning to an extent

```{r}
tail(wipro)
```

```{r}
print(summarytools::dfSummary(all_stocks_yy,
                        varnumbers = FALSE,
                        plain.ascii  = FALSE, 
                        style        = "grid", 
                        graph.magnif = 0.70, 
                        valid.col    = FALSE),
      method = 'render',
      table.classes = 'table-condensed')


```

Trades, Deliverable Volume and Deliverable% columns have a lot of NA's. The other columns are full.

```{r}
colnames(wipro)
```

To see on which date the highest sales were made, I picked the date and volume column and produced the result based on the grouped date column. We can see the highest number of shares ever sold was on 15 July 2020

```{r}
wipro_year_wise<- wipro %>% 
  arrange(desc(`Volume`)) %>% 
  select(`Date`,`Volume`) %>% 
  group_by(`Date`)
  # ungroup() %>% 
  # arrange(desc(`Date`)) %>% 
  # slice(1:10)

wipro_year_wise
```

trying to visualize it in a ggplot. I will pick the top 10 results.

```{r}

head(wipro_year_wise,20) %>%   
  ggplot(aes(Date, Volume)) +
  geom_point(size=2) +
  geom_line(color='blue') +
  labs(title='Wipro - Date vs Volume')
```

Checking for the year 2000

```{r}
wipro_y2000 <- wipro_year_wise %>% 
  filter()
```

## Reflection

## Conclusion

## Bibliography
